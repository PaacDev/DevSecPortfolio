<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Sensor Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>

    <div class="container mt-5 mb-5">
        <h1 class="text-center mb-4">Dashboard de Sensores</h1>

        <div class="row">
            <div class="col-md-6 mb-3">
                <div class="card shadow-sm rounded">
                    <div class="card-body">
                        <h5 class="card-title text-center">Temperatura (°C)</h5>
                        <canvas id="tempChart" style="width:100%; height:400px;"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <div class="card shadow-sm rounded">
                    <div class="card-body">
                        <h5 class="card-title text-center">Humedad (%)</h5>
                        <canvas id="humidityChart" style="width:100%; height:400px;"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-12 mb-3">
                <div class="card shadow-sm rounded">
                    <div class="card-body">
                        <h5 class="card-title text-center">Consumo Energía (W)</h5>
                        <canvas id="energyChart" style="width:100%; height:400px;"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    const labels = {{ labels|safe }};
    const temperatures = {{ temperatures|safe }};
    const humidity = {{ humidity|safe }};
    const energy = {{ energy|safe }};

    new Chart(document.getElementById("tempChart"), {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Temperatura (°C)',
                data: temperatures,
                borderColor: 'red',
                fill: false
            }]
        }
    });

    new Chart(document.getElementById("humidityChart"), {
    type: 'bar',
    data: {
        labels: labels,
        datasets: [{
            label: 'Humedad (%)',
            data: humidity,
            backgroundColor: 'rgba(54, 162, 235, 0.6)',  // azul con transparencia
            borderColor: 'blue',
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
    });


    new Chart(document.getElementById("energyChart"), {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Consumo Energía (W)',
                data: energy,
                borderColor: 'green',
                fill: false
            }]
        }
    });
</script>

</body>
</html>
